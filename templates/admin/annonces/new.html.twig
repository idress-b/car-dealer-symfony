{% extends 'base.html.twig' %}

{% block title %}New Annonces
{% endblock %}

{% block body %}
	<h1>Nouvelle annonce</h1>

	{{ include('admin/annonces/_form.html.twig') }}

	<a href="{{ path('app_annonces_index') }}">Retour Ã  la liste</a>


	<script>
		window.onload = () => {
let marque = document.querySelector('#annonces_marque')
marque.addEventListener('change', function () {
let form = document.querySelector('form')
let data = this.name + " = " + this.value
console.log(data)
fetch(form.action, {
method: form.getAttribute("method"),
body: data,
headers: {
"Content-Type": "application/x-www-form-urlencoded;charset:utf-8"
}
}).then(response => response.text()).then(html => {
let content = document.createElement("html");
content.innerHTML = html;
console.log(content)
let nouveauSelect = content.querySelector("#annonces_modele")

console.log(nouveauSelect)
document.querySelector("#annonces_modele").replaceWith(nouveauSelect)
})
})
}
	</script>


{% endblock %}
